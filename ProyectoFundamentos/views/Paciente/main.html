<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil del Paciente</title>
    <link rel="stylesheet" href="/ProyectoFundamentos/views/Paciente/pacienteMain.css">
    <link rel="icon" type="image/x-icon" href="/ProyectoFundamentos/Assets/icon/doctor.png">
    <script src="https://cdn.lordicon.com/lordicon.js"></script>
</head>

<body>

    <lord-icon class="P" herf="#" src="https://cdn.lordicon.com/gwvmctbb.json" trigger="hover">Cerrar Sesión
    </lord-icon>
    <br>
    <br>
    <div class="container">
        <center>
            <h1 style="color: rgb(255, 255, 255);">Lista de Citas Disponibles</h1>
        </center>
        <div class="container1">
            <div class="search-container">
                <input type="text" id="searchInput" onkeyup="searchTable()" placeholder="Buscar citas...">
            </div>
            <button class="open-popup-btn" onclick="openApprovedPopup()">Abrir citas aprobadas</button>

            <!-- Botón para abrir las citas rechazadas en la pantalla emergente -->
            <button class="open-popup-btn" onclick="openRejectedPopup()">Abrir citas rechazadas</button>

            <table id="appointmentsTable">
                <thead>
                    <tr>
                        <th>Doctor</th>
                        <th>tipo de Cita</th>
                        <th>Fecha</th>
                        <th>Hora</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Nombre del Doctor</td>
                        <td>Tipo de Cita</td>
                        <td>Fecha</td>
                        <td>Hora</td>
                        <td>Estado</td>
                        <td><input type="checkbox" class="action-checkbox"></td>
                    </tr>
                    <!-- Agrega más filas según sea necesario -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Ventana emergente (modal) para confirmar la cita -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close">&times;</span>
                <h2>Confirmar Cita</h2>
            </div>
            <div class="modal-body">
                <p>El doctor puede aceptar o rechazar esta cita este pendiente de su estado en la tablas.</p>
                <p>¿Estás seguro de que quieres confirmar esta cita?</p>
                <button id="confirmButton" class="confirm-button">Confirmar</button>
            </div>
        </div>
    </div>



    <div id="popup-container" class="popup-container">
        <div class="popup">
            <span class="close-popup-btn" onclick="closePopup()">&times;</span>
            <div id="Approved" class="tabcontent">
                <h3>Citas Aprobadas</h3>
                <div class="container1">
                    <div class="search-container">
                        <input type="text" id="searchInputApproved" onkeyup="searchTable('Approved')"
                            placeholder="Buscar citas aprobadas...">
                    </div>
                    <table id="appointmentsTableApproved">
                        <!-- Aquí irán las citas aprobadas -->
                    </table>
                </div>
            </div>
            <div id="Rejected" class="tabcontent">
                <h3>Citas Rechazadas</h3>
                <div class="container1">
                    <div class="search-container">
                        <input type="text" id="searchInputRejected" onkeyup="searchTable('Rejected')"
                            placeholder="Buscar citas rechazadas...">
                    </div>
                    <table id="appointmentsTableRejected">
                        <!-- Aquí irán las citas rechazadas -->
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Obtener la ventana emergente (modal)
        var modal = document.getElementById("myModal");

        // Obtener el botón que abre la ventana emergente
        var checkboxes = document.querySelectorAll('.action-checkbox');

        // Obtener el botón para cerrar la ventana emergente
        var span = document.getElementsByClassName("close")[0];

        // Función para mostrar la ventana emergente cuando se marca el checkbox
        checkboxes.forEach(function (checkbox) {
            checkbox.addEventListener('change', function () {
                if (this.checked) {
                    modal.style.display = "block";
                } else {
                    modal.style.display = "none";
                }
            });
        });

        // Función para cerrar la ventana emergente cuando se hace clic en el botón de cerrar
        span.onclick = function () {
            modal.style.display = "none";
        }

        // Función para confirmar la cita
        document.getElementById("confirmButton").addEventListener('click', function () {
            // Aquí puedes agregar la lógica para confirmar la cita
            alert("Cita confirmada"); // Ejemplo de alerta, puedes reemplazarlo con tu lógica de confirmación real
            modal.style.display = "none";
        });


        function searchTable() {
            var input, filter, table, tr, td, i, txtValue;
            input = document.getElementById("searchInput");
            filter = input.value.toUpperCase();
            table = document.getElementById("appointmentsTable");
            tr = table.getElementsByTagName("tr");
            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[0]; // Buscar en la primera columna (Doctor)
                if (td) {
                    txtValue = td.textContent || td.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }

    </script>

    <script>
        // Función para abrir la pantalla emergente de citas aprobadas
        function openApprovedPopup() {
            document.getElementById("popup-container").style.display = "block";
            document.getElementById("Approved").style.display = "block";
            document.getElementById("Rejected").style.display = "none";
        }

        // Función para abrir la pantalla emergente de citas rechazadas
        function openRejectedPopup() {
            document.getElementById("popup-container").style.display = "block";
            document.getElementById("Approved").style.display = "none";
            document.getElementById("Rejected").style.display = "block";
        }

        // Función para cerrar la pantalla emergente
        function closePopup() {
            document.getElementById("popup-container").style.display = "none";
        }

        // Función para buscar en la tabla
        function searchTable(tabName) {
            // Código de búsqueda aquí
        }
    </script>



</body>

</html>